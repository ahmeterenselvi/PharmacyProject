@model IEnumerable<CitiesandDistrictsResultDto>

<form>
    <label for="city">Şehir:</label>
    <select id="city" name="city" onchange="getDistricts()">
        <option value="">Şehir seçin</option>
        @foreach (var city in Model)
        {
            <option value="@city.City">@city.City</option>
        }
    </select>

    <label for="district">İlçe:</label>
    <select id="district" name="district">
        <option value="">İlçe seçin</option>
    </select>
</form>

<script>
    function getDistricts() {
        var selectedCity = document.getElementById('city').value;
        var citiesAndDistricts = @Html.Raw(Json.Serialize(ViewBag.CitiesAndDistricts));
        var districts = findDistricts(selectedCity, citiesAndDistricts);

        populateDistrictDropdown(districts);
    }

    function findDistricts(selectedCity, citiesAndDistricts) {
        for (var i = 0; i < citiesAndDistricts.length; i++) {
            if (citiesAndDistricts[i].City === selectedCity) {
                return citiesAndDistricts[i].Districts;
            }
        }
        return [];
    }

    function populateDistrictDropdown(districts) {
        var districtDropdown = document.getElementById('district');
        districtDropdown.innerHTML = '<option value="">İlçe seçin</option>';

        districts.forEach(function (district) {
            var option = document.createElement('option');
            option.value = district;
            option.text = district;
            districtDropdown.appendChild(option);
        });
    }
</script>
